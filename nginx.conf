server {
    listen 80;
    server_name tu_dominio_o_ip_publica;

    # Configuración de seguridad básica
    client_max_body_size 16M;
    
    # Configuración de timeouts
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;

    location / {
        include /home/ec2-user/flask-app/proxy_params;
        proxy_pass http://unix:/home/ec2-user/flask-app/flask-app.sock;
        
        # Headers adicionales para aplicaciones Flask
        proxy_buffering off;
        proxy_set_header Connection "";
        proxy_http_version 1.1;
    }

    # Configuración para archivos estáticos (si los tienes)
    location /static {
        alias /home/ec2-user/flask-app/static;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Configuración para favicon
    location /favicon.ico {
        alias /home/ec2-user/flask-app/static/favicon.ico;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Logs
    access_log /var/log/nginx/flask-app_access.log;
    error_log /var/log/nginx/flask-app_error.log;
}
